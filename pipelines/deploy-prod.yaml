steps:
  #Deploy Cloud Function
  - name: "gcr.io/cloud-builders/gcloud"
    args:
      - functions
      - deploy
      - fetchRide
      - --source=./api/
      - --trigger-http
      - --runtime=nodejs12
  #Deploy Bot
  # - name: "gcr.io/cloud-builders/gcloud"
  #   args:
  #     - functions
  #     - deploy
  #     - botFunction
  #     - --source=./bot/
  #     - --trigger-http
  #     - --runtime=nodejs12
  # NPM Install
  - name: "gcr.io/cloud-builders/npm"
    args: ["--prefix", "./client/", "install"]
  # NPM Build
  - name: "gcr.io/cloud-builders/npm"
    args: ["run", "build", "--prefix", "./client/"]
  # GCloud Deploy
  - name: "gcr.io/cloud-builders/gcloud"
    args:
      - "app"
      - "deploy"
      - "./client/client.yaml"
      - "--stop-previous-version"