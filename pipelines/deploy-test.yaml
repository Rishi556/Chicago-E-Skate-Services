steps:
  #Deploy Cloud Function
  - name: "gcr.io/cloud-builders/gcloud"
    args:
      - functions
      - deploy
      - fetchRideQA
      - --source=./api/
      - --trigger-http
      - --runtime=nodejs12
      - --entry-point=fetchRide
  #Deploy Bot
  - name: "gcr.io/cloud-builders/gcloud"
    args:
      - functions
      - deploy
      - botFunctionQA
      - --source=./bot/
      - --trigger-http
      - --runtime=nodejs12
      - --entry-point=botFunction
  # NPM Install
  - name: "gcr.io/cloud-builders/npm"
    args: ["--prefix", "./client/", "install"]
  # NPM Build
  - name: "gcr.io/cloud-builders/npm"
    args: ["run", "build", "--prefix", "./client/"]
  # GCloud Deploy
  - name: "gcr.io/cloud-builders/gcloud"
    args:
      - "app"
      - "deploy"
      - "./client/client.yaml"
      - "--no-promote"