steps:
  - name: "gcr.io/cloud-builders/gcloud"
    args:
      - functions
      - deploy
      - fetchRide
      - --source=./api/
      - --trigger-http
  # Install
  - name: "gcr.io/cloud-builders/npm"
    args: ["--prefix", "./client/", "install"]
  # Build
  - name: "gcr.io/cloud-builders/npm"
    args: [--prefix", "./client/", "run", "build"]
  # Deploy
  - name: "gcr.io/cloud-builders/gcloud"
    args:
      - "app"
      - "deploy"
      - "./client/client.yaml"
      - "--stop-previous-version"
